<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />
  <title id="pageTitle">Watching â€” Dareloom Hub</title>
  <meta name="description" id="metaDesc" content="Watch full HD erotic/romantic video now on Dareloom Hub. No signup, fast streaming." />

  <!-- Canonical to trailer page to avoid duplicate content -->
  <link rel="canonical" id="canonical" href="https://dareloom.fun/trailer.html" />

  <!-- Open Graph & Twitter for social sharing -->
  <meta property="og:title" id="ogTitle" content="Watching on Dareloom Hub" />
  <meta property="og:description" id="ogDesc" content="Full episode / movie streaming in HD." />
  <meta property="og:type" content="video.other" />
  <meta property="og:url" id="ogUrl" content="" />
  <meta property="og:image" id="ogImage" content="https://dareloom.fun/web-app-manifest-512x512.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Video Schema (will be updated by JS) -->
  <script type="application/ld+json" id="videoSchema"></script>

  <link rel="stylesheet" href="/style.css?v=20260120" />

  <style>
    :root {
      --primary: #ff4b91;
      --secondary: #00d4ff;
      --bg: #0a0a0a;
      --card: #111;
      --glow: rgba(255, 75, 145, 0.5);
      --text: #f0f0f0;
      --muted: #aaa;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "Poppins", sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: rgba(17,17,17,0.9);
      backdrop-filter: blur(12px);
      padding: 14px;
      text-align: center;
      font-size: 1.4rem;
      font-weight: 700;
      border-bottom: 1px solid rgba(255,75,145,0.3);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header span { color: var(--secondary); }

    #main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 16px;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    #video-title {
      font-size: 1.8rem;
      color: var(--primary);
      margin: 16px 0 8px;
      text-align: center;
      text-shadow: 0 2px 10px var(--glow);
    }

    #video-player-container {
      width: 100%;
      max-width: 960px;
      aspect-ratio: 16 / 9;
      background: #000;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 0 40px rgba(255,75,145,0.4);
      position: relative;
      margin-bottom: 24px;
    }

    #video-player-container.loading::before {
      content: "Loading video...";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.7);
      color: var(--muted);
      font-size: 1.3rem;
      z-index: 2;
    }

    iframe, video {
      width: 100%;
      height: 100%;
      border: none;
    }

    #controls {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      margin: 24px 0;
    }

    .btn {
      padding: 14px 32px;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), #e03e7f);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(255,75,145,0.6);
    }

    .btn-secondary {
      background: linear-gradient(135deg, var(--secondary), #0095ff);
      color: white;
    }

    .btn-telegram { background: #0088cc; color: white; }

    #tags-container {
      margin: 20px 0;
      text-align: center;
    }

    .tag {
      display: inline-block;
      background: rgba(255,75,145,0.15);
      color: var(--primary);
      padding: 8px 16px;
      border-radius: 30px;
      margin: 6px;
      font-size: 0.95rem;
    }

    #loading-spinner {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.7);
      z-index: 10;
      font-size: 1.5rem;
      color: var(--secondary);
    }

    #adblock-warning {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.95);
      color: white;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      backdrop-filter: blur(8px);
      padding: 20px;
      text-align: center;
    }

    #adblock-warning h1 { color: #ffcc00; margin-bottom: 16px; }

    footer {
      padding: 20px;
      text-align: center;
      color: var(--muted);
      font-size: 0.9rem;
      border-top: 1px solid #222;
    }

    @media (max-width: 768px) {
      #controls { flex-direction: column; align-items: stretch; }
      .btn { width: 100%; max-width: 360px; }
      #video-title { font-size: 1.5rem; }
    }
  </style>
</head>
<body>

  <header>Dareloom <span>Hub</span> â€” Now Playing</header>

  <div id="adblock-warning">
    <h1>ðŸš« Ad Blocker Detected</h1>
    <p style="font-size:1.2rem; max-width:500px; margin:16px auto;">
      Please disable your ad blocker to support free streaming and enjoy the video.
    </p>
    <button onclick="location.reload()" style="padding:14px 32px; background:var(--primary); color:white; border:none; border-radius:50px; font-size:1.1rem; cursor:pointer;">
      Refresh Page
    </button>
  </div>

  <div id="main-content">
    <h1 id="video-title">Loading...</h1>

    <div id="tags-container">
      <div id="tags-list"></div>
    </div>

    <div id="video-player-container" class="loading">
      <div id="loading-spinner">Loading video player...</div>
      <div id="player"></div>
    </div>

    <div id="controls">
      <!-- Buttons will be added by JS -->
    </div>
  </div>

  <footer>Â© Dareloom Hub â€¢ Adult 18+ Content â€¢ Enjoy Responsibly</footer>

  <script>
    // Helpers
    const qs = sel => document.querySelector(sel);
    const escape = s => (s || '').toString()
      .replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
      .replace(/"/g,'&quot;').replace(/'/g,'&#39;');

    function getParam(name) {
      return new URLSearchParams(location.search).get(name);
    }

    // Update meta & schema
    function updateMetadata(title, desc, thumb, embedUrl) {
      const safeTitle = escape(title || "Watching on Dareloom Hub");
      const safeDesc  = escape(desc  || "Full HD adult video streaming - Dareloom Hub");

      document.title = safeTitle;
      qs('#pageTitle').textContent = safeTitle;
      qs('#metaDesc').content = safeDesc.substring(0, 160) + '...';

      qs('#ogTitle').content = safeTitle;
      qs('#ogDesc').content = safeDesc;
      qs('#ogUrl').content = location.href;
      qs('#ogImage').content = thumb;

      // Video Schema
      const schema = {
        "@context": "https://schema.org",
        "@type": "VideoObject",
        "name": safeTitle,
        "description": safeDesc,
        "thumbnailUrl": thumb,
        "contentUrl": embedUrl || "",
        "embedUrl": embedUrl || "",
        "uploadDate": new Date().toISOString().split('T')[0],
        "publisher": {
          "@type": "Organization",
          "name": "Dareloom Hub",
          "url": "https://dareloom.fun/"
        }
      };

      qs('#videoSchema').textContent = JSON.stringify(schema, null, 2);
    }

    // Embed URL generator (same as before + more hosts)
    function getEmbedUrl(url) {
      if (!url) return '';
      url = url.trim();

      if (url.includes('mixdrop')) return url.replace(/\/(f|embed)\//i, '/e/');
      if (url.includes('streamwish') || url.includes('/file/')) return url.replace('/file/', '/e/').replace(/\/([a-zA-Z0-9]+)$/, '/e/$1');
      if (url.includes('streamtape.com/v/')) {
        const id = url.split('/v/')[1]?.split('/')[0];
        if (id) return `https://streamtape.com/e/${id}/`;
      }
      if (url.includes('drive.google.com')) return url.replace("/view", "/preview");
      if (url.includes('mega.nz')) return "MEGA";

      return url;
    }

    // Main load function
    function loadVideo() {
      const params = new URLSearchParams(location.search);
      const rawUrl   = params.get("url");
      const title    = params.get("title") || "Untitled Video";
      const rawTags  = params.get("tags") || "";

      if (!rawUrl) {
        qs('#video-title').textContent = "No video link provided";
        qs('#player').innerHTML = "<p style='color:#ff4b91; padding:40px;'>Please go back and select a video again.</p>";
        return;
      }

      // Update metadata
      const thumb = "https://dareloom.fun/placeholder-video.jpg"; // Replace with real if available
      const firstEmbed = rawUrl.split(',')[0].trim();
      const embedUrl = getEmbedUrl(firstEmbed);
      updateMetadata(title, `Watch ${title} full HD now on Dareloom Hub.`, thumb, embedUrl);

      qs('#video-title').textContent = title;

      // Tags
      const tagsDiv = qs('#tags-list');
      tagsDiv.innerHTML = '';
      if (rawTags) {
        decodeURIComponent(rawTags).split(',').map(t => t.trim()).filter(Boolean).forEach(tag => {
          const span = document.createElement('span');
          span.className = 'tag';
          span.textContent = tag;
          tagsDiv.appendChild(span);
        });
      } else {
        tagsDiv.innerHTML = '<span class="tag" style="background:#222;color:#888;">No tags</span>';
      }

      // Player
      const player = qs('#player');
      const container = qs('#video-player-container');

      if (embedUrl && embedUrl !== "MEGA") {
        player.innerHTML = `<iframe src="${escape(embedUrl)}" allowfullscreen allow="autoplay; fullscreen; encrypted-media"></iframe>`;
        container.classList.remove('loading');
      } else {
        player.innerHTML = `
          <div style="padding:60px 20px; text-align:center;">
            <h3>Video cannot be embedded directly</h3>
            <p style="margin:16px 0;">Click one of the buttons below to watch on original host.</p>
          </div>
        `;
      }

      // Controls / Buttons
      const controls = qs('#controls');
      controls.innerHTML = '';

      const btns = [
        { text: "Open Full Player", class: "btn btn-primary", href: firstEmbed || "#", onclick: "window.open(this.href, '_blank'); return false;" },
        rawTags.includes('telegram') || rawUrl.includes('t.me') ? { text: "Telegram Link", class: "btn btn-telegram", href: rawUrl.split(',').find(l => l.includes('t.me')) || "#", target: "_blank" } : null
      ].filter(Boolean);

      btns.forEach(b => {
        const a = document.createElement('a');
        a.className = b.class;
        a.href = b.href;
        a.target = b.target || "_blank";
        a.rel = "noopener noreferrer";
        a.textContent = b.text;
        if (b.onclick) a.onclick = new Function(b.onclick);
        controls.appendChild(a);
      });
    }

    // Simple ad-block simulation (optional - remove if not needed)
    setTimeout(() => {
      if (!qs('#player iframe')) {
        // Could show warning, but for now just proceed
      }
    }, 3000);

    window.addEventListener('DOMContentLoaded', loadVideo);
  </script>
</body>
</html>
