<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  
  <title id="pageTitle">Now Watching - Dareloom Hub</title>
  <meta name="description" id="metaDesc" content="Watch full HD video on Dareloom Hub. Fast streaming, no signup." />
  <meta name="robots" content="index, follow" />
  
  <meta property="og:title" id="ogTitle" content="Watching on Dareloom Hub" />
  <meta property="og:description" id="ogDesc" content="HD Video Streaming" />
  <meta property="og:type" content="video.other" />
  <meta property="og:image" id="ogImage" content="https://dareloom.fun/web-app-manifest-512x512.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <script type="application/ld+json" id="videoSchema"></script>

  <style>
    :root {
      --primary: #ff4b91;
      --secondary: #00d4ff;
      --background: #0a0a0a;
      --card-bg: #161616;
      --text-color: #f0f0f0;
      --muted-color: #aaa;
      --highlight-green: #00ff88; 
    }

    body, html {
      margin: 0; padding: 0; min-height: 100vh;
      background: var(--background); color: var(--text-color);
      font-family: 'Poppins', sans-serif;
      display: flex; flex-direction: column; align-items: center;
    }

    header {
      background: rgba(17,17,17,0.95);
      padding: 15px 0; text-align: center;
      font-size: 24px; font-weight: bold; width: 100%;
      border-bottom: 1px solid rgba(255, 75, 145, 0.3);
      position: sticky; top: 0; z-index: 100;
      backdrop-filter: blur(10px);
    }

    header span.hub-highlight { color: var(--highlight-green); text-shadow: 0 0 10px rgba(0,255,136,0.5); }

    #main-content-wrapper {
      display: none; flex-direction: column; align-items: center;
      width: 95%; max-width: 1000px; flex-grow: 1; padding: 20px 0;
    }

    #video-title {
      color: var(--primary); text-align: center; margin: 10px 0;
      font-size: 1.8rem; text-shadow: 0 2px 10px rgba(255, 75, 145, 0.3);
    }

    #tags-container {
      width: 100%; padding: 10px 0; text-align: center; margin-bottom: 15px;
    }

    .tag-link {
      display: inline-block; background: rgba(255, 255, 255, 0.05);
      color: var(--highlight-green); padding: 6px 14px; border-radius: 50px;
      margin: 4px; text-decoration: none; font-size: 13px;
      border: 1px solid rgba(0, 255, 136, 0.2); transition: 0.3s;
    }

    .tag-link:hover { background: var(--highlight-green); color: #000; }

    #videoWrap {
      width: 100%; background: #000; border-radius: 12px; overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.8); position: relative;
    }

    iframe {
      width: 100%; aspect-ratio: 16/9; border: none; display: block;
    }

    .ad-box {
      margin: 15px 0; width: 100%; text-align: center; min-height: 90px;
      display: flex; justify-content: center; align-items: center;
      background: rgba(255,255,255,0.02); border-radius: 8px;
    }

    #controls-container {
      display: flex; justify-content: center; width: 100%; flex-wrap: wrap; gap: 10px; margin-top: 20px;
    }

    .btn {
      padding: 12px 25px; border-radius: 50px; cursor: pointer;
      font-weight: bold; text-decoration: none; display: inline-flex;
      align-items: center; gap: 8px; transition: 0.3s; color: #fff;
    }

    .btn-primary { background: linear-gradient(135deg, var(--primary), #d81b60); }
    .btn-telegram { background: #0088cc; }
    .btn-mixdrop { background: #ff4500; }
    .btn-streamwish { background: #1e88e5; }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); opacity: 0.9; }

    #adblock-warning-overlay {
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98);
      color: white; z-index: 99999; backdrop-filter: blur(10px);
      justify-content: center; align-items: center; flex-direction: column; padding: 20px;
    }

    footer { padding: 30px; color: var(--muted-color); font-size: 13px; text-align: center; }
  </style>
</head>
<body>

<header>üé• Dareloom <span class="hub-highlight">Hub</span></header>

<div id="adblock-warning-overlay">
  <h1 style="color:#FFD700;">üö´ Ad Blocker Detected!</h1>
  <p style="font-size:18px;">Please disable Ad Blocker to support free streaming.</p>
  <button onclick="location.reload()" style="padding:10px 25px; border-radius:50px; border:none; background:var(--primary); color:white; cursor:pointer;">I've disabled it, Refresh</button>
</div>

<div id="main-content-wrapper">
  <h2 id="video-title">Loading Video...</h2>
  
  <div id="tags-container">
    <div id="current-video-tags"></div>
  </div>

  <div id="videoWrap"></div>

  <div class="ad-box">
    <script type="text/javascript">
      atOptions = { 'key' : 'd1be46ed95d3e2db572824c531da5082', 'format' : 'iframe', 'height' : 90, 'width' : 728, 'params' : {} };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/d1be46ed95d3e2db572824c531da5082/invoke.js"></script>
  </div>

  <div id="controls-container"></div>
</div>

<footer>¬© 2026 Dareloom Hub ‚Ä¢ 18+ Adult Content</footer>

<script>
const qs = sel => document.querySelector(sel);
const AD_POP = "//bulletinsituatedelectronics.com/24/e4/33/24e43300238cf9b86a05c918e6b00561.js";
let lastPop = 0;

function escapeHtml(s) {
  return (s || '').toString().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
}

// --- SEO & Metadata Logic (From Version 1) ---
function updateMetadata(title, tags, embedUrl) {
  const safeTitle = escapeHtml(title || "Watching on Dareloom Hub");
  const desc = `Watch ${safeTitle} in Full HD. Tags: ${tags}. Free streaming on Dareloom Hub.`;
  
  document.title = safeTitle + " - Dareloom Hub";
  qs('#pageTitle').textContent = safeTitle;
  qs('#metaDesc').content = desc;
  qs('#ogTitle').content = safeTitle;
  qs('#ogDesc').content = desc;

  const schema = {
    "@context": "https://schema.org",
    "@type": "VideoObject",
    "name": safeTitle,
    "description": desc,
    "thumbnailUrl": "https://dareloom.fun/web-app-manifest-512x512.png",
    "uploadDate": new Date().toISOString().split('T')[0],
    "embedUrl": embedUrl
  };
  qs('#videoSchema').textContent = JSON.stringify(schema);
}

function openAdsterraPop() {
  const now = Date.now();
  if (now - lastPop < 5000) return;
  lastPop = now;
  const s = document.createElement('script');
  s.src = AD_POP; s.async = true;
  document.body.appendChild(s);
  setTimeout(() => s.remove(), 5000);
}

function getEmbedUrl(url) {
  if (!url) return '';
  let u = url.trim();
  if (u.includes("mixdrop.") || u.includes("/f/")) {
    let id = u.match(/(?:\/f\/|\/)([A-Za-z0-9]{6,20})/);
    if (id) return `https://mixdrop.co/e/${id[1]}`;
  }
  if (u.includes("streamwish.") || u.includes("dumbalag.")) {
    let id = u.match(/(?:\/file\/|\/)([A-Za-z0-9_-]{10,})$/);
    if (id) return `https://streamwish.to/e/${id[1]}`;
  }
  if (u.includes("streamtape.com/v/")) {
    const m = u.match(/\/v\/([A-Za-z0-9_-]+)/);
    if (m) return `https://streamtape.com/e/${m[1]}/`;
  }
  return u.includes("drive.google.com") ? u.replace("/view", "/preview") : u;
}

async function loadVideo() {
  qs('#main-content-wrapper').style.display = 'flex';
  
  const params = new URLSearchParams(location.search);
  const rawLinks = params.get("url");
  const title = params.get("title") || "Untitled Video";
  const rawTags = params.get("tags") || "";

  if (!rawLinks) {
    qs("#videoWrap").innerHTML = "<h3 style='padding:50px;'>No Video Found</h3>";
    return;
  }

  const links = decodeURIComponent(rawLinks).split(",").map(l => l.trim()).filter(Boolean);
  const embed = getEmbedUrl(links[0]);

  // Update Metadata & Title
  updateMetadata(title, rawTags, embed);
  qs('#video-title').textContent = title;

  // Render Tags
  const tagsDiv = qs('#current-video-tags');
  if (rawTags) {
    decodeURIComponent(rawTags).split(',').forEach(tag => {
      const a = document.createElement('a');
      a.className = 'tag-link';
      a.href = `/?search=${encodeURIComponent(tag.trim())}`;
      a.textContent = tag.trim().toUpperCase();
      a.onclick = openAdsterraPop;
      tagsDiv.appendChild(a);
    });
  }

  // Set Iframe with Sandbox for safety
  if (embed && !embed.includes("mega.nz")) {
    qs("#videoWrap").innerHTML = `<iframe src="${escapeHtml(embed)}" allowfullscreen sandbox="allow-forms allow-scripts allow-pointer-lock allow-same-origin allow-presentation"></iframe>`;
  } else {
    qs("#videoWrap").innerHTML = "<div style='padding:50px; text-align:center;'><h3>Direct playback unavailable</h3><p>Use the buttons below to watch.</p></div>";
  }

  // Generate Buttons
  const ctr = qs("#controls-container");
  links.forEach(link => {
    let btnClass = "btn btn-primary";
    let label = "üîó Watch Mirror";
    if (link.includes("t.me")) { btnClass = "btn btn-telegram"; label = "‚¨áÔ∏è Telegram"; }
    else if (link.includes("mixdrop")) { btnClass = "btn btn-mixdrop"; label = "üîó MixDrop"; }
    else if (link.includes("streamwish")) { btnClass = "btn btn-streamwish"; label = "üîó Streamwish"; }

    const a = document.createElement('a');
    a.className = btnClass; a.href = link; a.target = "_blank";
    a.textContent = label; a.onclick = openAdsterraPop;
    ctr.appendChild(a);
  });
}

document.addEventListener("DOMContentLoaded", loadVideo);
</script>
</body>
</html>

