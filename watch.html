<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Now Watching - Dareloom Hub</title>
<style>
:root {
  --primary: #00e676;
  --secondary: #1de9b6;
  --bg: #0a0a0a;
  --text: #fff;
  --muted: #aaa;
  --card-bg: #111;
}
body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: 'Poppins', sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}

/* Header */
header {
  background:linear-gradient(90deg,#00e676,#1de9b6);
  color:#000;
  font-weight:700;
  font-size:22px;
  text-align:center;
  padding:14px 0;
  width:100%;
  letter-spacing:1px;
  box-shadow:0 2px 6px rgba(0,0,0,0.4);
}

/* Player Frame */
#video-section {
  width:95%;
  max-width:900px;
  background:var(--card-bg);
  margin:20px auto;
  border-radius:16px;
  padding:16px;
  box-shadow:0 0 15px rgba(0,255,128,0.2);
}
iframe {
  width:100%;
  border:none;
  border-radius:12px;
  aspect-ratio:16/9;
  box-shadow:0 0 15px rgba(0,0,0,0.6);
}

/* Title & Tags */
#video-title {
  text-align:center;
  font-size:20px;
  margin:12px 0;
  font-weight:600;
}
.tags {
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:8px;
  margin-bottom:10px;
}
.tag {
  background:rgba(0,255,128,0.1);
  color:var(--secondary);
  border:1px solid var(--secondary);
  border-radius:20px;
  padding:6px 12px;
  font-size:14px;
  cursor:pointer;
  transition:all .3s;
}
.tag:hover { background:var(--secondary); color:#000; }

/* Buttons */
.btn {
  background:var(--primary);
  color:#000;
  border:none;
  border-radius:8px;
  padding:10px 16px;
  margin:5px;
  cursor:pointer;
  font-weight:600;
  transition:transform .2s;
}
.btn:hover { transform:scale(1.05); }

/* Suggested Section */
#suggested {
  width:95%;
  max-width:900px;
  margin:30px auto;
}
#suggested h3 {
  text-align:left;
  color:var(--primary);
  margin-bottom:10px;
}
.suggestions {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:12px;
}
.suggestion-card {
  background:var(--card-bg);
  border-radius:10px;
  overflow:hidden;
  text-align:center;
  cursor:pointer;
  transition:transform .3s,box-shadow .3s;
}
.suggestion-card:hover {
  transform:translateY(-3px);
  box-shadow:0 0 15px rgba(0,255,128,0.2);
}
.suggestion-card img {
  width:100%;
  height:100px;
  object-fit:cover;
}
.suggestion-card p {
  font-size:14px;
  color:var(--muted);
  padding:5px;
}

/* Footer */
footer {
  text-align:center;
  color:var(--muted);
  font-size:14px;
  padding:12px;
}
</style>
</head>

<body>
<header>üé¨ Dareloom Hub</header>

<div id="video-section">
  <div id="video-title">Loading...</div>
  <div id="tag-container" class="tags"></div>
  <iframe id="video-frame" allowfullscreen></iframe>

  <div style="text-align:center;margin-top:10px;">
    <button class="btn" id="telegram-btn">üì≤ Telegram</button>
    <button class="btn" id="source-btn">üåê Source</button>
  </div>
</div>

<section id="suggested">
  <h3>üî• Weekly Top Videos</h3>
  <div class="suggestions" id="suggestions-list"></div>
</section>

<footer>¬© 2025 Dareloom.fun</footer>

<script>
const params=new URLSearchParams(location.search);
const title=params.get("title")||"Untitled Video";
const url=params.get("url")||"";
const tags=params.get("tags")?params.get("tags").split(","):[];
const videoFrame=document.getElementById("video-frame");
const videoTitle=document.getElementById("video-title");
const tagContainer=document.getElementById("tag-container");

videoTitle.textContent=title;

// Simple embed fix
function getEmbed(u){
  if(!u)return"";
  if(u.includes("mixdrop"))return u.replace("/f/","/e/");
  if(u.includes("streamtape.com/v/"))return u.replace("/v/","/e/");
  if(u.includes("streamwish"))return u.replace("/file/","/e/");
  return u;
}

videoFrame.src=getEmbed(url);

// Tags render
tags.forEach(t=>{
  const tag=document.createElement("span");
  tag.className="tag";
  tag.textContent=t.trim();
  tag.onclick=()=>{window.location.href=`/tag/${t.trim().toLowerCase()}`};
  tagContainer.appendChild(tag);
});

// Dummy Weekly Top (replace later with fetch)
const topVideos=[
  {thumb:"https://i.postimg.cc/6p7qV1y2/1.jpg",title:"Romantic Night"},
  {thumb:"https://i.postimg.cc/jdN3RW3Q/2.jpg",title:"Office Love"},
  {thumb:"https://i.postimg.cc/yxQW7zSz/3.jpg",title:"Secret Affair"},
  {thumb:"https://i.postimg.cc/kGvF2Lqz/4.jpg",title:"Hot Neighbor"},
  {thumb:"https://i.postimg.cc/9fCgfCh2/5.jpg",title:"Wild Weekend"},
];
const sug=document.getElementById("suggestions-list");
topVideos.forEach(v=>{
  const card=document.createElement("div");
  card.className="suggestion-card";
  card.innerHTML=`<img src="${v.thumb}"><p>${v.title}</p>`;
  card.onclick=()=>alert("Load "+v.title);
  sug.appendChild(card);
});

// Buttons
document.getElementById("telegram-btn").onclick=()=>alert("Redirect to Telegram");
document.getElementById("source-btn").onclick=()=>window.open(url,"_blank");
</script>
</body>
</html>
