<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Now Watching - Dareloom Hub</title>
<style>
  * {box-sizing: border-box;}
  body,html {
    margin:0; padding:0; height:100%;
    background:#000; color:#fff;
    font-family:Arial, Helvetica, sans-serif;
    display:flex; flex-direction:column;
  }
  header {
    background:#111;
    padding:12px 20px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
    color:#e91e63;
    letter-spacing:0.5px;
  }
  #videoWrap {
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
  }
  iframe {
    width:100%;
    height:80vh;
    border:none;
  }
  footer {
    text-align:center;
    padding:15px;
    background:#111;
    border-top:1px solid #222;
  }
  .btn {
    background:#e91e63;
    color:#fff;
    border:none;
    padding:10px 20px;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
  }
  .btn:hover {
    background:#ff4081;
  }
  .notice {
    text-align:center;
    color:#ccc;
    padding:20px;
    font-size:16px;
  }
  .ad-container {
    margin-top:10px;
    display:flex;
    justify-content:center;
  }
  @media(max-width:768px){
    iframe { height:60vh; }
  }
</style>
</head>
<body>
  <header>üé• Dareloom Hub</header>

  <div id="videoWrap">
    <div class="notice">Loading video...</div>
  </div>

  <footer id="footer">
    <button id="downloadBtn" class="btn" style="display:none;">‚¨áÔ∏è Download / Open Original</button>
    <div class="ad-container" id="footerAd"></div>
  </footer>

<script>
const params = new URLSearchParams(window.location.search);
const videoUrl = params.get("url");
const wrap = document.getElementById("videoWrap");
const btn = document.getElementById("downloadBtn");

if (videoUrl) {
  if (videoUrl.includes('streamtape.com/e/') || videoUrl.includes('stape.fun/e/')) {
    // ‚úÖ Streamtape embed works fine
    wrap.innerHTML = `<iframe src="${videoUrl}" allowfullscreen allow="autoplay; fullscreen; encrypted-media; picture-in-picture"></iframe>`;
    btn.style.display = "block";
    btn.onclick = () => window.open(videoUrl, "_blank");
  } 
  else if (videoUrl.includes('t.me/') || videoUrl.includes('telegram.me/')) {
    // ‚ö° Telegram link - open via button
    wrap.innerHTML = `
      <div class="notice">
        üì± This video is available on Telegram.<br><br>
        <button class="btn" onclick="window.open('${videoUrl}','_blank')">Open in Telegram</button>
      </div>
    `;
    document.getElementById("footer").style.display = "none";
  }
  else {
    wrap.innerHTML = "<h2 class='notice'>‚ö†Ô∏è Invalid or unsupported video link.</h2>";
  }
} else {
  wrap.innerHTML = "<h2 class='notice'>‚ö†Ô∏è No video link found.</h2>";
}

// ---- Footer Ad (Adsterra 728x90) ----
const adContainer = document.getElementById('footerAd');
adContainer.innerHTML = `
<script type="text/javascript">
	atOptions = {
		'key' : 'd1be46ed95d3e2db572824c531da5082',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/d1be46ed95d3e2db572824c531da5082/invoke.js"></script>
`;
</script>

</body>
</html>
